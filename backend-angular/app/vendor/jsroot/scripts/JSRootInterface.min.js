(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery-ui","d3","JSRootPainter"],a)}else{if(typeof jQuery=="undefined"){throw new Error("jQuery not defined","JSRootPainter.jquery.js")}if(typeof jQuery.ui=="undefined"){throw new Error("jQuery-ui not defined","JSRootPainter.jquery.js")}if(typeof d3!="object"){throw new Error("This extension requires d3.v3.js","JSRootPainter.jquery.js")}if(typeof JSROOT=="undefined"){throw new Error("JSROOT is not defined","JSRootPainter.jquery.js")}if(typeof JSROOT.Painter!="object"){throw new Error("JSROOT.Painter not defined","JSRootPainter.jquery.js")}a(jQuery,jQuery.ui,d3,JSROOT)}}(function(d,f,b,a){var c=null,e=null;if(typeof define==="function"&&define.amd){a.loadScript("$$$style/JSRootInterface.css")}ResetUI=function(){if(c){c.clear(true)}};guiLayout=function(){var g=document.getElementById("gui_layout");return g?g.options[g.selectedIndex].text:"collapsible"};setGuiLayout=function(k){var h=document.getElementById("gui_layout");if(!h){return}for(var g in h.options){var j=h.options[g].text;if(typeof j=="undefined"){continue}if((j==k)||(j.replace(/ /g,"")==k)){h.selectedIndex=g;break}}};LocalFileSelected=function(j){var g=j.target.files;for(var i=0;i<g.length;++i){var h=g[i];d("#gui_urlToLoad").val(h.name);if(c){c.OpenRootFile(h,e)}}e=null};ReadSelectedFile=function(){var g=d("#gui_urlToLoad").val().trim();if(!g.length){return}if(!c){alert("Hierarchy painter not initialized")}if((g.lastIndexOf(".json")==g.length-5)||(g.lastIndexOf(".JSON")==g.length-5)){c.OpenJsonFile(g)}else{c.OpenRootFile(g)}};BuildSimpleGUI=function(){var h=d("#simpleGUI"),n=false;if(h.length==0){h=d("#onlineGUI");if(h.length==0){return alert("no div for simple gui found")}n=true}if(h.attr("ignoreurl")==="true"){a.gStyle.IgnoreUrlOptions=true}if((a.GetUrlOption("nobrowser")!==null)||(h.attr("nobrowser")&&h.attr("nobrowser")!=="false")){return a.BuildNobrowserGUI()}a.Painter.readStyleFromURL();var k="<div id='left-div' class='column' style='top:1px; bottom:1px'>";if(n){k+="<h1><font face=\"Verdana\" size=\"4\"><div id=\"toptitle\">ROOT online server</div></font></h1><p><font face='Verdana' size='1px'><a href='https://github.com/linev/jsroot'>JSROOT</a> version <span style='color:green'><b>"+a.version+'</b></span></font></p><p> Hierarchy in <a href="h.json">json</a> and <a href="h.xml">xml</a> format</p> <input type="checkbox" name="monitoring" id="monitoring"/> Monitoring  <select style="padding:2px; margin-left:10px; margin-top:5px;" id="gui_layout"> <option>simple</option><option>collapsible</option><option>flex</option><option>tabs</option><option>grid 1x2</option><option>grid 2x2</option><option>grid 1x3</option><option>grid 2x3</option><option>grid 3x3</option><option>grid 4x4</option> </select>'}else{k+="<h1><font face='Verdana' size='4'>Read a ROOT file</font></h1><p><font face='Verdana' size='1px'><a href='https://root.cern/js/'>JSROOT</a> version <span style='color:green'><b>"+a.version+"</b></span></font></p>";var j=a.GetUrlOption("noselect")||h.attr("noselect");if(!j){var g=h.attr("files")||"../files/hsimple.root",q=a.GetUrlOption("path")||h.attr("path")||"",l=g.split(";");k+='<input type="text" value="" style="width:95%; margin-top:5px;" id="gui_urlToLoad" title="input file name"/><select id="selectFileName" style="width:65%; margin-top:5px;" title="select file name"<option value="" selected="selected"></option>';for(var m in l){k+='<option value = "'+q+l[m]+'">'+l[m]+"</option>"}k+='</select><input type="file" id="gui_localFile" accept=".root" style="display:none"/><output id="list" style="display:none"></output><input type="button" value="..." id="gui_fileBtn" style="width:15%; margin-top:5px;margin-left:5px;" title="select local file for reading"/><br/><p><small><a href="https://github.com/linev/jsroot/blob/master/docs/JSROOT.md#reading-root-files-from-other-servers">Read docu</a> how to open files from other servers.</small></p><input style="padding:2px; margin-top:5px;"       onclick="ReadSelectedFile()" type="button" title="Read the Selected File" value="Load"/><input style="padding:2px; margin-left:10px;"       onclick="ResetUI()" type="button" title="Clear All" value="Reset"/><select style="padding:2px; margin-left:10px; margin-top:5px;" title="layout kind" id="gui_layout">  <option>simple</option><option>collapsible</option><option>flex</option><option>tabs</option><option>grid 1x2</option><option>grid 2x2</option><option>grid 1x3</option><option>grid 2x3</option><option>grid 3x3</option><option>grid 4x4</option></select><br/>'}else{if(j==="file"){k+='<select style="padding:2px; margin-left:5px; margin-top:5px;" title="layout kind" id="gui_layout">  <option>simple</option><option>collapsible</option><option>flex</option><option>tabs</option><option>grid 1x2</option><option>grid 2x2</option><option>grid 1x3</option><option>grid 2x3</option><option>grid 3x3</option><option>grid 4x4</option></select><br/>'}}}k+='<div id="browser"></div></div><div id="separator-div" style="top:1px; bottom:1px"></div><div id="right-div" class="column" style="top:1px; bottom:1px"></div>';var o="right-div";h.empty().append(k);var p=null;if(n){if(typeof GetCachedHierarchy=="function"){p=GetCachedHierarchy()}if(typeof p!="object"){p=""}}else{if(!j){d("#selectFileName").val("").change(function(){d("#gui_urlToLoad").val(d(this).val())});d("#gui_fileBtn").click(function(){d("#gui_localFile").click()});d("#gui_localFile").change(LocalFileSelected)}}c=new a.HierarchyPainter("root","browser");c.SetDisplay(null,o);c._topname=a.GetUrlOption("topname")||h.attr("topname");a.Painter.ConfigureVSeparator(c);c.SelectLocalFile=function(i){e=i;d("#gui_localFile").click()};c.StartGUI(p,function(){setGuiLayout(c.GetLayout());d("#gui_layout").change(function(){if(c){c.SetDisplay(guiLayout(),o)}});if(n){if((c.h!=null)&&("_toptitle" in c.h)){d("#toptitle").html(c.h._toptitle)}d("#monitoring").prop("checked",c.IsMonitoring()).click(function(){c.EnableMonitoring(this.checked);c.updateAll(!this.checked)})}else{if(!j){var i="";c.ForEachRootFile(function(r){if(i==""){i=r._fullurl}});d("#gui_urlToLoad").val(i).keyup(function(r){if(r.keyCode==13){ReadSelectedFile()}})}}},b.select("#simpleGUI"))};return a}));